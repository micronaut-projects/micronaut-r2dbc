plugins {
    id 'io.micronaut.build.internal.module'
}

dependencies {
    compileOnly "org.graalvm.nativeimage:svm"
    compileOnly "io.micronaut:micronaut-management"

    api platform("io.r2dbc:r2dbc-bom:$r2dbcVersion")
    api "io.micronaut:micronaut-inject"
    api "io.micronaut:micronaut-validation"
    api "io.r2dbc:r2dbc-spi"

    implementation "io.projectreactor:reactor-core"

    testImplementation "io.micronaut:micronaut-management"

    testImplementation("io.reactivex.rxjava2:rxjava")
    testImplementation "org.testcontainers:r2dbc"

    // mariadb
    testImplementation "org.mariadb:r2dbc-mariadb:$r2dbcMariaVersion"
    testImplementation "org.testcontainers:mariadb"
    testImplementation 'org.mariadb.jdbc:mariadb-java-client'

    // mysql
    testImplementation "org.testcontainers:mysql"
    testImplementation 'mysql:mysql-connector-java'
    testImplementation 'dev.miku:r2dbc-mysql'

    // h2
    testImplementation 'io.r2dbc:r2dbc-h2'

    // sqlserver
    testImplementation "org.testcontainers:mssqlserver"
    testImplementation 'com.microsoft.sqlserver:mssql-jdbc'
    testImplementation 'io.r2dbc:r2dbc-mssql'

    // postgres
    testImplementation 'io.r2dbc:r2dbc-postgresql'
    testImplementation "org.testcontainers:postgresql"
    testImplementation 'org.postgresql:postgresql'
}
