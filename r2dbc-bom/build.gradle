plugins {
    id "io.micronaut.build.internal.bom"
}

dependencies {
    api(platform("io.r2dbc:r2dbc-bom:$r2dbcVersion"))
    constraints {
        api("org.mariadb:r2dbc-mariadb:$r2dbcMariaVersion")
        api("io.projectreactor.netty:reactor-netty:$reactorNettyVersion")
    }
}

micronautBom {
    excludeProject.set({ p ->
        p.group.contains('example') || p.name.contains('example') || p.name.contains('test-')
    } as Spec<Project>)

    suppressions {
        // The R2DBC bom that we include mentions dependencies which do not belong to io.r2dbc group
        bomAuthorizedGroupIds.put("io.r2dbc:r2dbc-bom", ["com.google.cloud", "com.oracle.database.r2dbc", "org.mariadb", "dev.miku"] as Set)
    }
}